# Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸ (Pinned Indicators)

Ð­Ñ‚Ð¾ Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ Ð² Ð²ÐµÑ€Ñ…Ð½ÐµÐ¹ Ñ‡Ð°ÑÑ‚Ð¸ Ð”Ð½ÐµÐ²Ð½Ð¸ÐºÐ° Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð°. ÐžÐ½Ð¸ Ð¸Ð¼ÐµÑŽÑ‚ Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ñ‹ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð³Ð¾ Ð¾Ñ‚ÑÑ‡ÐµÑ‚Ð° Ð´Ð»Ñ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾Ð³Ð¾ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°.

## 1. ÐšÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ñ
Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸ ÑÐ»ÑƒÐ¶Ð°Ñ‚ Ð´Ð»Ñ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ñ… Ð·Ð°Ð¼ÐµÑ€Ð¾Ð² (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, "Ð˜Ð·Ð¼ÐµÑ€ÑÑ‚ÑŒ Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 4 Ñ‡Ð°ÑÐ°").

- **ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ:** Ð’ Ð²Ð¸Ð´Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº Ð² ÐºÐ°Ñ€ÑƒÑÐµÐ»Ð¸/ÑÐ»Ð°Ð¹Ð´ÐµÑ€Ðµ Ð²Ð²ÐµÑ€Ñ…Ñƒ ÑÐºÑ€Ð°Ð½Ð° "Ð”Ð½ÐµÐ²Ð½Ð¸Ðº".
- **Ð¢Ð°Ð¹Ð¼ÐµÑ€:** ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð¾ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð·Ð°Ð¼ÐµÑ€Ð°.
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑÑ‹:**
  - ðŸŸ¢ **ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚:** Ð’Ñ€ÐµÐ¼Ñ ÐµÑ‰Ðµ Ð½Ðµ Ð¿Ñ€Ð¸ÑˆÐ»Ð¾ (Ñ‚Ð°Ð¹Ð¼ÐµÑ€ Ñ‚Ð¸ÐºÐ°ÐµÑ‚).
  - ðŸ”´ **ÐŸÑ€Ð¾ÑÑ€Ð¾Ñ‡ÐµÐ½Ð¾:** Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹ÑˆÐ»Ð¾, Ð·Ð°Ð¼ÐµÑ€ Ð½Ðµ ÑÐ´ÐµÐ»Ð°Ð½.

## 2. Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…
Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ `diaries` Ð² ÐºÐ¾Ð»Ð¾Ð½ÐºÐµ `pinned_parameters` (JSON).

```json
[
  {
    "key": "blood_pressure",       // ÐšÐ»ÑŽÑ‡ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ñ (ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹)
    "interval_minutes": 240,       // Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ð·Ð°Ð¼ÐµÑ€Ð¾Ð² Ð² Ð¼Ð¸Ð½ÑƒÑ‚Ð°Ñ…
    "last_recorded_at": "2024-12-20T10:00:00Z" // Ð’Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ð·Ð°Ð¿Ð¸ÑÐ¸ (ISO 8601)
  },
  {
    "key": "temperature",
    "interval_minutes": 120,
    "last_recorded_at": null       // null, ÐµÑÐ»Ð¸ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ ÐµÑ‰Ðµ Ð½Ðµ Ð±Ñ‹Ð»Ð¾
  }
]
```

## 3. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ (API)

ÐŸÑ€Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ðµ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹ Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ°.

### 3.1. ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÐµÐ¹

ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´ÑÑ‚ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ°.

**GET** `/api/v1/diary?patient_id={id}`
**GET** `/api/v1/diary/{diary_id}`

**ÐžÑ‚Ð²ÐµÑ‚ (JSON):**
```json
{
  "id": 1,
  "patient_id": 10,
  "pinned_parameters": [
    {
      "key": "blood_pressure",
      "interval_minutes": 240,
      "last_recorded_at": "2024-12-20T10:00:00.000000Z"
    },
    {
      "key": "temperature",
      "interval_minutes": 120,
      "last_recorded_at": null
    }
  ],
  "entries": [...]
}
```

---

### 3.2. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ° Ñ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸

Ð•ÑÐ»Ð¸ Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ° Ñƒ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð° ÐµÑ‰Ðµ Ð½ÐµÑ‚, ÐµÐ³Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÑ€Ð°Ð·Ñƒ Ñ Ð½Ð°Ð±Ð¾Ñ€Ð¾Ð¼ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÐµÐ¹.

**POST** `/api/v1/diary/create`

**Ð¢ÐµÐ»Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°:**
```json
{
  "patient_id": 10,
  "pinned_parameters": [
    { "key": "blood_pressure", "interval_minutes": 240 },
    { "key": "temperature", "interval_minutes": 120 }
  ]
}
```

**ÐžÑ‚Ð²ÐµÑ‚:** `201 Created` Ñ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð¼ Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ°.

---

### 3.3. Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÐµÐ¹ (Ð²ÐºÐ»/Ð²Ñ‹ÐºÐ», Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ñ‹)

Ð­Ñ‚Ð¾Ñ‚ Ð¼ÐµÑ‚Ð¾Ð´ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ **Ð·Ð°Ð¼ÐµÐ½ÑÐµÑ‚** ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÐµÐ¹. 
> âš ï¸ **Ð’Ð°Ð¶Ð½Ð¾:** Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ `last_recorded_at` Ð´Ð»Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ñ, Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ ÐµÐ³Ð¾ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾. ÐžÐ´Ð½Ð°ÐºÐ¾, ÐµÑÐ»Ð¸ Ð²Ñ‹ ÐµÐ³Ð¾ **Ð½Ðµ** Ð¿ÐµÑ€ÐµÐ´Ð°Ð´Ð¸Ñ‚Ðµ (Ð¿ÐµÑ€ÐµÐ´Ð°Ð´Ð¸Ñ‚Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ `key` Ð¸ `interval`), Ð¾Ð½ ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑÑ Ð² `null`. ÐŸÐ¾ÑÑ‚Ð¾Ð¼Ñƒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº, Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð².

**PATCH** `/api/v1/diary/pinned`

**Ð¢ÐµÐ»Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°:**
```json
{
  "patient_id": 10,
  "pinned_parameters": [
    { 
      "key": "blood_pressure", 
      "interval_minutes": 180,  // Ð˜Ð·Ð¼ÐµÐ½Ð¸Ð»Ð¸ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ñ 240 Ð½Ð° 180
      "last_recorded_at": "2024-12-20T10:00:00.000000Z" // Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸ Ð²Ñ€ÐµÐ¼Ñ
    },
    // Ð£Ð±Ñ€Ð°Ð»Ð¸ temperature (Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¾Ð½ Ð¾Ñ‚ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑÑ)
    {
      "key": "pulse",  // Ð”Ð¾Ð±Ð°Ð²Ð¸Ð»Ð¸ Ð½Ð¾Ð²Ñ‹Ð¹
      "interval_minutes": 60
    }
  ]
}
```

**ÐžÑ‚Ð²ÐµÑ‚:** `200 OK`

```json
{
    "message": "Pinned parameters updated successfully",
    "diary": { ... } // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ°
}
```

---

### 3.4. Ð—Ð°Ð¿Ð¸ÑÑŒ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ (Ð¡Ð±Ñ€Ð¾Ñ Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ð°)

Ð§Ñ‚Ð¾Ð±Ñ‹ "Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ (Ð·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð½Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ), Ð²Ñ‹ **ÐÐ•** Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚Ðµ ÐµÐ³Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸. Ð’Ñ‹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐµ.

**ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:**
Ð’Ñ‹ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚Ðµ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ñ). Ð¡ÐµÑ€Ð²ÐµÑ€ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð¸ **Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸** Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ ÐµÐ³Ð¾ Ð²Ñ€ÐµÐ¼Ñ `last_recorded_at`.

**POST** `/api/v1/diary`

**Ð¢ÐµÐ»Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð´Ð»Ñ Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ñ):**
```json
{
  "patient_id": 10,
  "type": "physical",
  "key": "blood_pressure",  // Ð­Ñ‚Ð¾Ñ‚ ÐºÐ»ÑŽÑ‡ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°Ñ‚ÑŒ Ñ ÐºÐ»ÑŽÑ‡Ð¾Ð¼ Ð² Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ñ…
  "value": {
    "systolic": 120,
    "diastolic": 80
  },
  "recorded_at": "2024-12-20T12:00:00Z" // Ð’Ñ€ÐµÐ¼Ñ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ
}
```

**ÐžÑ‚Ð²ÐµÑ‚:** `201 Created` (ÑÐ¾Ð·Ð´Ð°Ð½Ð° Ð·Ð°Ð¿Ð¸ÑÑŒ).

ðŸ‘‰ **Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Ð¢ÐµÐ¹Ð¼ÐµÑ€ Ñƒ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ñ `blood_pressure` Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑÑ Ð¸ Ð½Ð°Ñ‡Ð½ÐµÑ‚ Ð¾Ñ‚ÑÑ‡ÐµÑ‚ Ð¾Ñ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ `recorded_at`.


## 4. ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ð¾Ð²
Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ñ‹.

**Ð›Ð¾Ð³Ð¸ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ (`DiaryEntryObserver`):**
1. ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ð´Ð½ÐµÐ²Ð½Ð¸Ðº (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `blood_pressure`) Ñ‡ÐµÑ€ÐµÐ· API Ð¸Ð»Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð² ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚Ð½Ð¾Ð¼ Ð»Ð¸ÑÑ‚Ðµ.
2. Ð¡ÐµÑ€Ð²ÐµÑ€ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ `diary_entries`.
3. Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ **Observer**, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑÑ‚Ð¾Ñ‚ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ (`key`) Ð² ÑÐ¿Ð¸ÑÐºÐµ `pinned_parameters` ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð½ÐµÐ²Ð½Ð¸ÐºÐ°.
4. Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ â€” Ð¿Ð¾Ð»Ðµ `last_recorded_at` Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ… Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ Ð½Ð° Ð²Ñ€ÐµÐ¼Ñ ÑÑ‚Ð¾Ð¹ Ð½Ð¾Ð²Ð¾Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ¸.

âœ… **Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Ð’Ð°Ð¼ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ð·Ð°Ð¼ÐµÑ€Ð°. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¸ Ñ‚Ð°Ð¹Ð¼ÐµÑ€ ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑÑ ÑÐ°Ð¼.

## 5. Ð›Ð¾Ð³Ð¸ÐºÐ° Ð½Ð° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ðµ (Frontend)

Ð”Ð»Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ñƒ:

```dart
// Dart example
DateTime? lastRecordedAt = pinnedParam.lastRecordedAt; // Ð¸Ð· JSON
int intervalMinutes = pinnedParam.intervalMinutes;

if (lastRecordedAt == null) {
  // ÐÐ¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ Ð¸Ð·Ð¼ÐµÑ€ÑÐ»Ð¾ÑÑŒ -> "Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð·Ð°Ð¼ÐµÑ€"
  return Status.overdue;
}

DateTime nextMeasurementTime = lastRecordedAt.add(Duration(minutes: intervalMinutes));
Duration difference = nextMeasurementTime.difference(DateTime.now());

if (difference.isNegative) {
  // Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹ÑˆÐ»Ð¾ -> "ÐŸÑ€Ð¾ÑÑ€Ð¾Ñ‡ÐµÐ½Ð¾ Ð½Ð° X Ð¼Ð¸Ð½"
  return Status.overdue;
} else {
  // Ð’Ñ€ÐµÐ¼Ñ ÐµÑÑ‚ÑŒ -> "Ð§ÐµÑ€ÐµÐ· X Ñ‡ Y Ð¼Ð¸Ð½"
  return Status.pending; 
}
```
